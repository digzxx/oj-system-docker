# 使用官方 Python 基础镜像作为起点
FROM python:3.11-slim

# 设置容器的工作目录
WORKDIR /app

# ----------------------------------------------------
# 依赖安装层 (利用 Docker 缓存)
# ----------------------------------------------------
# 复制 requirements.txt 到工作目录
COPY requirements.txt /app/

# 安装所有 Python 依赖
RUN pip install --no-cache-dir -r requirements.txt

# ----------------------------------------------------
# 复制代码和设置启动命令 (生产环境专用)
# ----------------------------------------------------

# !!! 重要的学习逻辑 !!!
# 在开发环境 (Dev) 中，请保持此行被注释，因为它会被 docker-compose.yml 中的 volumes 挂载覆盖。
# 在部署生产环境 (Prod) 镜像前，必须解除注释此行，确保代码被打包进镜像。
# COPY . /app 

# 暴露 Django 默认端口
EXPOSE 8000